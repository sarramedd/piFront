<div class="container-scroller">
  <app-sidebar-back></app-sidebar-back>

  <div class="container-fluid page-body-wrapper">
    <app-navbar></app-navbar>

    <div class="main-panel" style="height: 100vh; overflow-y: auto; padding-top: 0;">
      <div class="content-wrapper">
        <div class="page-header">
          <h3 class="page-title">Tableau des Catégories</h3>
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Dashboard</a></li>
              <li class="breadcrumb-item active" aria-current="page">Catégories</li>
            </ol>
          </nav>
        </div>

        <!-- Utilisation du router-outlet pour afficher le tableau des catégories -->

        <div class="container mt-4">
          <h2>Ajouter une catégorie</h2>
          
          <!-- Formulaire -->
          <form [formGroup]="categoryForm" (ngSubmit)="addCategory()">
            <!-- Nom de la catégorie -->
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Nom de la catégorie</mat-label>
              <input matInput formControlName="name" />
              <mat-error *ngIf="categoryForm.get('name')?.hasError('required')">Nom requis</mat-error>
              <mat-error *ngIf="categoryForm.get('name')?.hasError('minlength')">Le nom doit contenir au moins 3 caractères</mat-error>
            </mat-form-field>
        
            <!-- Type de catégorie (Combobox) -->
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Type de catégorie</mat-label>
              <mat-select formControlName="categoryType" required>
                <mat-option *ngFor="let type of categoryTypes" [value]="type">
                  {{ type }}
                </mat-option>
              </mat-select>
              <mat-error *ngIf="categoryForm.get('categoryType')?.hasError('required')">Sélectionner un type</mat-error>
            </mat-form-field>
        
            <!-- Description -->
            <mat-form-field appearance="fill" class="w-100">
              <mat-label>Description</mat-label>
              <input matInput formControlName="description" />
              <mat-error *ngIf="categoryForm.get('description')?.hasError('required')">Description requise</mat-error>
              <mat-error *ngIf="categoryForm.get('description')?.hasError('minlength')">La description doit contenir au moins 5 caractères</mat-error>
            </mat-form-field>
        
            <!-- Image (URL) -->
            <!-- <mat-form-field appearance="fill" class="w-100">
              <mat-label>Image (URL)</mat-label>
              <input matInput formControlName="image" />
              <mat-error *ngIf="categoryForm.get('image')?.hasError('required')">URL d'image requise</mat-error>
            </mat-form-field> -->
        
            <!-- Aperçu de l'image -->
            <!-- <div *ngIf="categoryForm.get('image')?.value && !categoryForm.get('image')?.hasError('required')" class="image-preview">
              <h4>Aperçu de l'image</h4>
              <img [src]="categoryForm.get('image')?.value" alt="Image Preview" class="image-thumb" />
            </div> -->
        
            <!-- Bouton de soumission -->
            <button mat-raised-button color="primary" type="submit" [disabled]="categoryForm.invalid">
              Ajouter
            </button>
          </form>
        </div>
                
      </div>
      <app-footer-back></app-footer-back>
    </div>
  </div>
</div>

